Кеширование в плагинах LiveStreet
================================
Для кеширования LiveStreet использует библиотеку **Dklab_Cache**. Кеширование необходимо для снижения нагрузки на базу данных и повышения производительности сайта в целом. Принцип работы кеширования прост - при обращении к БД полученные данные попадают в кеш и при следующем аналогичном запросе они просто берутся из кеша, не обращаясь к БД. Конечно, при условии что они еще не изменились. Поэтому при любом изменении данных (insert, update, delete) необходимо чистить кеш.
При этом можно выделить 3 основные функции кеширования:

- Занесение данных в кеш *по имени* (setter)
- Получение данных из кеша *по имени* (getter)
- Очистка кеша *по имени или тегам*

Имя — некое символическое представление того что вы ищете в БД. Например, чтобы получить список книг от автора с id=2 есть такой запрос к БД:
~~~
SELECT * from `books` WHERE `author_id` = 2
~~~
При помощи кеширования можно сохранить результат этого запроса, например, под именем "book_author_2", а потом, пока данные не поменяются — получать эти данные не из БД, а из сохраненного значения в кеше.

Когда делаем выборку (select) — ищем информацию в кеше по имени, например, "book_author_2", если она есть — возвращаем, нету — берем из БД и сохраняем в кеш:
~~~
if (false === ($data = $this -> Cache_Get ("book_author_{$iAuthorId}"))) {
  $data = $this -> oMapper -> GetBooksByAuthorId ($iAuthorId);
  $this -> Cache_Set ($data, "book_author_{$iAuthorId}", array ("book_change_{$iAuthorId}"), 60*60*24*3);
}
~~~
При этом `Cache_Set` принимает следующие параметры:
- Собственно данные которые нужно положить в кеш
- Адрес по которому эти данные складываются
- Массив тегов, с которыми ассоциируются эти данные
- Время в секундах, по истичению которого, данные считаются более не актуальными 


Когда делаем изменения в БД (insert, update), чистим кеш по тегам:
~~~
$this -> Cache_Clean (Zend_Cache::CLEANING_MODE_MATCHING_TAG, array ('book_change', "book_change_{$oBooks -> getId ()}"));
~~~
или по имени:
~~~
$this -> Cache_Delete ("book_change_{$oBooks -> getId ()}");
~~~

Когда удаляем данные из таблицы — удаляем кешированный результат, который может содержать значение которое мы удаляем:
~~~
$this -> Cache_Clean (Zend_Cache::CLEANING_MODE_MATCHING_TAG, array ('book_change', "book_change_{$oBooks -> getId ()}"));
~~~

Полезные ссылки по кешированию
------------------------------
- [Dklab_Cache](http://dklab.ru/lib/Dklab_Cache/)
- [Статья на Хабре](http://habrahabr.ru/post/57142/)
- [Исходник модуля](https://github.com/livestreet/livestreet-framework/blob/master/classes/modules/cache/Cache.class.php)
